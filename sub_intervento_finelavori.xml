<plominodatabase id="iol_praticaweb">
  <design>
    <element id="sub_intervento_finelavori" title="sub_intervento_finelavori" type="PlominoForm">
      <id type="Products.Archetypes.Field.StringField">sub_intervento_finelavori</id>
      <onCreateDocument type="Products.Archetypes.Field.TextField"><![CDATA[]]></onCreateDocument>
      <onOpenDocument type="Products.Archetypes.Field.TextField"><![CDATA[]]></onOpenDocument>
      <beforeSaveDocument type="Products.Archetypes.Field.TextField"><![CDATA[]]></beforeSaveDocument>
      <onSaveDocument type="Products.Archetypes.Field.TextField"><![CDATA[]]></onSaveDocument>
      <onDeleteDocument type="Products.Archetypes.Field.TextField"><![CDATA[]]></onDeleteDocument>
      <onSearch type="Products.Archetypes.Field.TextField"><![CDATA[]]></onSearch>
      <beforeCreateDocument type="Products.Archetypes.Field.TextField"><![CDATA[]]></beforeCreateDocument>
      <FormLayout type="Products.Archetypes.Field.TextField"><![CDATA[
<fieldset class="scheduler-border" title="Richiedente">
<legend class="scheduler-border">COMUNICAZIONE</legend>
<div class="row-fluid">
<div class="span8">
<span class="plominoLabelClass">fine_lavori_opt</span><span class="plominoFieldClass">fine_lavori_opt</span>
</div>
<div class="span4">
<span class="plominoLabelClass">data_fine_lavori</span><span class="plominoFieldClass">data_fine_lavori</span>
</div>
</div>
<h5>(ai sensi del'art. 26 comma 10 della L.R. 16/08 la comunicazione di fine lavori deve pervenire entro sessanta giorni dall'avvenuta ultimazione dei lavori; in caso di mancata comunicazione della data di ultimazione lavori sarà applicata la sanzione amministrativa pecuniaria pari a € 1033,00)</h5>
<div class="alert alert-success"><h5>IL MANCATO TEMPESTIVO INVIO DELLA COMUNICAZIONE DI ULTIMAZIONE LAVORI COSTITUISCE VIOLAZIONE DELL'ART. 92 DEL VIGENTE REGOLAMENTO EDILIZIO SOGGETTA ALL'APPLICAZIONE DELLE PROCEDURE SANZIONARIE PREVISTE ALL'ART. 143 DEL REGOLAMENTO EDILIZIO. IN TALE EVENTUALITA LA COMUNICAZIONE DI ULTIMAZIONE DOVRA ESSERE TRASMESSA SOTTO FORMA DI AUTOCERTIFICAZIONE.</h5></div>
</fieldset>
<fieldset class="scheduler-border">
<legend class="scheduler-border">TIPOLOGIA DI INTERVENTO E DESCRIZIONE SINTETICA DELLE OPERE</legend>
<div>
<span class="plominoLabelClass">varianti_lavori_opt</span><span class="plominoFieldClass">varianti_lavori_opt</span>
</div>
<p><span class="plominoHidewhenClass">start:hw_no_varianti</span></p>
<div>
<span class="plominoLabelClass">descrizione_opere</span> <span class="plominoFieldClass">descrizione_opere</span>
</div>
<p><span class="plominoHidewhenClass">end:hw_no_varianti</span></p>
</fieldset>
]]></FormLayout>
      <FormMethod type="Products.Archetypes.Field.TextField"><![CDATA[Auto]]></FormMethod>
      <DocumentTitle type="Products.Archetypes.Field.TextField"><![CDATA[]]></DocumentTitle>
      <DynamicDocumentTitle type="Products.Archetypes.Field.BooleanField">False</DynamicDocumentTitle>
      <StoreDynamicDocumentTitle type="Products.Archetypes.Field.BooleanField">False</StoreDynamicDocumentTitle>
      <DocumentId type="Products.Archetypes.Field.TextField"><![CDATA[]]></DocumentId>
      <ActionBarPosition type="Products.Archetypes.Field.StringField">TOP</ActionBarPosition>
      <HideDefaultActions type="Products.Archetypes.Field.BooleanField">False</HideDefaultActions>
      <HideInMenu type="Products.Archetypes.Field.BooleanField">True</HideInMenu>
      <isSearchForm type="Products.Archetypes.Field.BooleanField">False</isSearchForm>
      <isPage type="Products.Archetypes.Field.BooleanField">False</isPage>
      <SearchView type="Products.Archetypes.Field.StringField"/>
      <SearchFormula type="Products.Archetypes.Field.TextField"><![CDATA[]]></SearchFormula>
      <Position type="Products.Archetypes.Field.IntegerField"/>
      <ResourcesJS type="Products.Archetypes.Field.TextField"><![CDATA[]]></ResourcesJS>
      <ResourcesCSS type="Products.Archetypes.Field.TextField"><![CDATA[++resource++iol.document/css/bootstrap.css
++resource++iol.praticaweb/css/iol-sue.css]]></ResourcesCSS>
      <excludeFromNav type="Products.Archetypes.Field.BooleanField">False</excludeFromNav>
      <elements>
        <element id="data_fine_lavori" title="In data:" type="PlominoField">
          <id type="Products.Archetypes.Field.StringField">data_fine_lavori</id>
          <FieldType type="Products.Archetypes.Field.StringField">DATETIME</FieldType>
          <FieldMode type="Products.Archetypes.Field.StringField">EDITABLE</FieldMode>
          <Formula type="Products.Archetypes.Field.TextField"><![CDATA[]]></Formula>
          <FieldReadTemplate type="Products.Archetypes.Field.StringField">IOL-DATETIMEFieldRead</FieldReadTemplate>
          <FieldEditTemplate type="Products.Archetypes.Field.StringField">DATETIMEFieldEdit</FieldEditTemplate>
          <Mandatory type="Products.Archetypes.Field.BooleanField">True</Mandatory>
          <ValidationFormula type="Products.Archetypes.Field.TextField"><![CDATA[]]></ValidationFormula>
          <ToBeIndexed type="Products.Archetypes.Field.BooleanField">False</ToBeIndexed>
          <IndexType type="Products.Archetypes.Field.StringField">DEFAULT</IndexType>
          <HTMLAttributesFormula type="Products.Archetypes.Field.TextField"><![CDATA[return '''
data-datepicker-options='{"changeMonth": true, "changeYear": true, "minDate":"-10Y", "dateFormat": "dd/mm/yy", "yearRange": "-10:+0"}'
''']]></HTMLAttributesFormula>
          <params>
<param>
<value><struct>
<member>
<name>format</name>
<value><string>%d/%m/%Y</string></value>
</member>
<member>
<name>widget</name>
<value><string>JQUERY</string></value>
</member>
</struct></value>
</param>
</params>
        </element>
        <element id="descrizione_intervento" title="descrizione_intervento" type="PlominoField">
          <id type="Products.Archetypes.Field.StringField">descrizione_intervento</id>
          <FieldType type="Products.Archetypes.Field.StringField">TEXT</FieldType>
          <FieldMode type="Products.Archetypes.Field.StringField">COMPUTEDONSAVE</FieldMode>
          <Formula type="Products.Archetypes.Field.TextField"><![CDATA[protocollo = context.getItem('titolo_esistente_protocollo','')
anno_prot = context.getItem('titolo_esistente_anno','')
numero = context.getItem('titolo_esistente_numero','')

return 'Comunicazione di fine lavori della pratica %s protocollo n. %s anno %s' %(numero,protocollo,anno_prot)]]></Formula>
          <FieldReadTemplate type="Products.Archetypes.Field.StringField"/>
          <FieldEditTemplate type="Products.Archetypes.Field.StringField"/>
          <Mandatory type="Products.Archetypes.Field.BooleanField">False</Mandatory>
          <ValidationFormula type="Products.Archetypes.Field.TextField"><![CDATA[]]></ValidationFormula>
          <ToBeIndexed type="Products.Archetypes.Field.BooleanField">False</ToBeIndexed>
          <IndexType type="Products.Archetypes.Field.StringField">DEFAULT</IndexType>
          <HTMLAttributesFormula type="Products.Archetypes.Field.TextField"><![CDATA[]]></HTMLAttributesFormula>
        </element>
        <element id="fine_lavori_opt" title="I lavori sono stati ultimati:" type="PlominoField">
          <id type="Products.Archetypes.Field.StringField">fine_lavori_opt</id>
          <FieldType type="Products.Archetypes.Field.StringField">SELECTION</FieldType>
          <FieldMode type="Products.Archetypes.Field.StringField">EDITABLE</FieldMode>
          <Formula type="Products.Archetypes.Field.TextField"><![CDATA[]]></Formula>
          <FieldReadTemplate type="Products.Archetypes.Field.StringField">SELECTIONFieldReadCheck</FieldReadTemplate>
          <FieldEditTemplate type="Products.Archetypes.Field.StringField"/>
          <Mandatory type="Products.Archetypes.Field.BooleanField">True</Mandatory>
          <ValidationFormula type="Products.Archetypes.Field.TextField"><![CDATA[]]></ValidationFormula>
          <ToBeIndexed type="Products.Archetypes.Field.BooleanField">False</ToBeIndexed>
          <IndexType type="Products.Archetypes.Field.StringField">DEFAULT</IndexType>
          <HTMLAttributesFormula type="Products.Archetypes.Field.TextField"><![CDATA[]]></HTMLAttributesFormula>
          <params>
<param>
<value><struct>
<member>
<name>selectionlistformula</name>
<value><string>['''completamente|1''','''in forma parziale come da planimetria allegata|2''']</string></value>
</member>
<member>
<name>dynamictableparam</name>
<value><string>'bPaginate': true,
'bLengthChange': true,
'bFilter': true,
'bSort': true,
'bInfo': true,
'bAutoWidth': false</string></value>
</member>
<member>
<name>widget</name>
<value><string>RADIO</string></value>
</member>
</struct></value>
</param>
</params>
        </element>
        <element id="varianti_lavori_opt" title="Le varianti in corso d'opera realizzate:" type="PlominoField">
          <id type="Products.Archetypes.Field.StringField">varianti_lavori_opt</id>
          <FieldType type="Products.Archetypes.Field.StringField">SELECTION</FieldType>
          <FieldMode type="Products.Archetypes.Field.StringField">EDITABLE</FieldMode>
          <Formula type="Products.Archetypes.Field.TextField"><![CDATA[]]></Formula>
          <FieldReadTemplate type="Products.Archetypes.Field.StringField">SELECTIONFieldReadCheck</FieldReadTemplate>
          <FieldEditTemplate type="Products.Archetypes.Field.StringField"/>
          <Mandatory type="Products.Archetypes.Field.BooleanField">True</Mandatory>
          <ValidationFormula type="Products.Archetypes.Field.TextField"><![CDATA[]]></ValidationFormula>
          <ToBeIndexed type="Products.Archetypes.Field.BooleanField">False</ToBeIndexed>
          <IndexType type="Products.Archetypes.Field.StringField">DEFAULT</IndexType>
          <HTMLAttributesFormula type="Products.Archetypes.Field.TextField"><![CDATA['data-dhw=sub_intervento_finelavori']]></HTMLAttributesFormula>
          <params>
<param>
<value><struct>
<member>
<name>selectionlistformula</name>
<value><string>['''non configurano variazione essenziale e sono conformi alle prescrizioni urbanistico edilizie (articolo 25, comma 2 l.r. 16/2008 e s.m.)|1''','''consistono in opere realizzabili mediante CILA ai sensi articolo 6 bis d.P.R. 380/2001 (art. 25, comma 3 l.r. 16/2008 e s.m.)|2''','''non sono state realizzate varianti in corso d'opera|3''']</string></value>
</member>
<member>
<name>dynamictableparam</name>
<value><string>'bPaginate': true,
'bLengthChange': true,
'bFilter': true,
'bSort': true,
'bInfo': true,
'bAutoWidth': false</string></value>
</member>
<member>
<name>widget</name>
<value><string>RADIO</string></value>
</member>
</struct></value>
</param>
</params>
        </element>
        <element id="descrizione_opere" title="Descrizione sintetica delle opere" type="PlominoField">
          <id type="Products.Archetypes.Field.StringField">descrizione_opere</id>
          <FieldType type="Products.Archetypes.Field.StringField">TEXT</FieldType>
          <FieldMode type="Products.Archetypes.Field.StringField">EDITABLE</FieldMode>
          <Formula type="Products.Archetypes.Field.TextField"><![CDATA[]]></Formula>
          <FieldReadTemplate type="Products.Archetypes.Field.StringField"/>
          <FieldEditTemplate type="Products.Archetypes.Field.StringField"/>
          <Mandatory type="Products.Archetypes.Field.BooleanField">True</Mandatory>
          <ValidationFormula type="Products.Archetypes.Field.TextField"><![CDATA[]]></ValidationFormula>
          <ToBeIndexed type="Products.Archetypes.Field.BooleanField">False</ToBeIndexed>
          <IndexType type="Products.Archetypes.Field.StringField">DEFAULT</IndexType>
          <HTMLAttributesFormula type="Products.Archetypes.Field.TextField"><![CDATA['maxlength = 200']]></HTMLAttributesFormula>
          <params>
<param>
<value><struct>
<member>
<name>size</name>
<value><string>6</string></value>
</member>
<member>
<name>widget</name>
<value><string>TEXTAREA</string></value>
</member>
</struct></value>
</param>
</params>
        </element>
        <element id="hw_no_varianti" title="hw_no_varianti" type="PlominoHidewhen">
          <id type="Products.Archetypes.Field.StringField">hw_no_varianti</id>
          <Formula type="Products.Archetypes.Field.TextField"><![CDATA[context.getItem('varianti_lavori_opt','3')=='3']]></Formula>
          <isDynamicHidewhen type="Products.Archetypes.Field.BooleanField">True</isDynamicHidewhen>
        </element>
      </elements>
    </element>
  </design>
</plominodatabase>
