<plominodatabase id="iol_praticaweb">
  <design>
    <resource id="config_map" title="" type="Script (Python)"><![CDATA[## Script (Python) "config_map"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=
##title=
##
dz = dict(
mapKey = "AIzaSyDCV1Q_j22PJjxqlnswzZ6i95mnwRFlqVg",               
#inquadramento della mappa
mapSettings = {"scaleControl": True,"tilt":0, "minZoom": 8, "zoom":12, "center": [44.304,8.476], "scrollwheel": False,"mapTypeId":"","coordsrid":3003},
#configurazione dei livelli WMS in mappa
layerSettings = dict(
layers=[{"name":"OSM","type":"TMS","maxZoom":18,"minZoom":8,"opacity":0.8,"url":"https://tile.openstreetmap.org","alt":"OpenStreetMap"},
{"name":"ambiti","type":"WMS","maxZoom":18,"minZoom":8,"opacity":0.8,"url":"https://iol.comune.savona.it/cgi-bin/mapserv?map=/apps/GisClient-2/mapset/map/savona_wms_iol.map&LAYERS=ambiti_12&TRANSPARENT=TRUE","alt":"OCCUPAZIONE"},
{"name":"vincoli","type":"WMS","maxZoom":18,"minZoom":8,"opacity":0.8,"url":"https://iol.comune.savona.it/cgi-bin/mapserv?map=/apps/GisClient-2/mapset/map/savona_wms_iol.map&LAYERS=vincoli_architettonici_30&TRANSPARENT=TRUE","alt":"OCCUPAZIONE"},
{"name":"pdb","type":"WMS","maxZoom":18,"minZoom":8,"opacity":0.8,"url":"https://iol.comune.savona.it/cgi-bin/mapserv?map=/apps/GisClient-2/mapset/map/savona_wms_iol.map&LAYERS=suscettivita_al_dissesto_76&TRANSPARENT=TRUE","alt":"OCCUPAZIONE"},
{"name":"fasce_inondabilita","type":"WMS","maxZoom":18,"minZoom":8,"opacity":0.8,"url":"https://iol.comune.savona.it/cgi-bin/mapserv?map=/apps/GisClient-2/mapset/map/savona_wms_iol.map&LAYERS=fasce_di_inondabilita_75&TRANSPARENT=TRUE","alt":"OCCUPAZIONE"},
{"name":"zone_a","type":"WMS","maxZoom":18,"minZoom":8,"opacity":0.8,"url":"https://iol.comune.savona.it/cgi-bin/mapserv?map=/apps/GisClient-2/mapset/map/savona_wms_iol.map&LAYERS=zone_a_55&TRANSPARENT=TRUE","alt":"OCCUPAZIONE"},
{"name":"assetto_insediativo","type":"WMS","maxZoom":18,"minZoom":8,"opacity":0.8,"url":"https://iol.comune.savona.it/cgi-bin/mapserv?map=/apps/GisClient-2/mapset/map/savona_wms_iol.map&LAYERS=assetto_insediativo_15&TRANSPARENT=TRUE","alt":"OCCUPAZIONE"},
{"name":"assetto_geomorfologico","type":"WMS","maxZoom":18,"minZoom":8,"opacity":0.8,"url":"https://iol.comune.savona.it/cgi-bin/mapserv?map=/apps/GisClient-2/mapset/map/savona_wms_iol.map&LAYERS=assetto_geomorfologico_17&TRANSPARENT=TRUE","alt":"OCCUPAZIONE"},
{"name":"assetto_vegetazionale","type":"WMS","maxZoom":18,"minZoom":8,"opacity":0.8,"url":"https://iol.comune.savona.it/cgi-bin/mapserv?map=/apps/GisClient-2/mapset/map/savona_wms_iol.map&LAYERS=assetto_vegetazionale_18&TRANSPARENT=TRUE","alt":"OCCUPAZIONE"}],
#elenco dei livelli nel menu a cascata
layersList=[
    'PUC - Ambiti|ambiti',
    'Vincoli architettonici|vincoli',
    'PdB - Susc. al dissesto|pdb',
    'PdB - Fasce inond.|fasce_inondabilita',
    'PTCP - A. insediativo|assetto_insediativo',
    'PTCP - A. geomorfologico|assetto_geomorfologico',
    'PTCP - A. vegetazionale|assetto_vegetazionale',
    'Zone A (D.M. 1444/68)|zone_a'
],
types = "OSM,CATASTO,DEM,roadmap,terrain,satellite,hybrid",
layersActive = ['ambiti'], #layers attivi in avvio
baseType = "OSM"  #layer di sfondo predefinito in avvio
))
if test=='1':
    from Products.CMFPlomino.PlominoUtils import json_dumps
    return json_dumps(dz)
else:
    return dz

return dz
]]></resource>
  </design>
</plominodatabase>
