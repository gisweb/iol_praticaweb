<plominodatabase id="iol_dev">
  <design>
    <element id="sub_esecutore" title="sub_esecutore" type="PlominoForm">
      <id type="Products.Archetypes.Field.StringField">sub_esecutore</id>
      <onCreateDocument type="Products.Archetypes.Field.TextField"><![CDATA[]]></onCreateDocument>
      <onOpenDocument type="Products.Archetypes.Field.TextField"><![CDATA[]]></onOpenDocument>
      <beforeSaveDocument type="Products.Archetypes.Field.TextField"><![CDATA[]]></beforeSaveDocument>
      <onSaveDocument type="Products.Archetypes.Field.TextField"><![CDATA[context.setItem('Form','frm_presentata')]]></onSaveDocument>
      <onDeleteDocument type="Products.Archetypes.Field.TextField"><![CDATA[]]></onDeleteDocument>
      <onSearch type="Products.Archetypes.Field.TextField"><![CDATA[]]></onSearch>
      <beforeCreateDocument type="Products.Archetypes.Field.TextField"><![CDATA[]]></beforeCreateDocument>
      <FormLayout type="Products.Archetypes.Field.TextField"><![CDATA[
<div class="iol-toolbar"></div>
<p class="tecnico-opt"><span class="plominoLabelClass">lavori_economia_opt</span><span class="plominoFieldClass">lavori_economia_opt</span></p>
<p><span class="plominoHidewhenClass">start:hw_no_avviso</span></p>
<div class="alert alert-error"><h5>Con la scelta di questa opzione si dichiara di essere consapevole che l’efficacia del titolo abilitativo è condizionata alla obbligatoria comunicazione dell’inizio dei lavori comprensiva di tutti i dati relativi all’impresa esecutrice.<br>L’efficacia del titolo abilitativo è condizionata alla obbligatoria comunicazione dell’inizio dei lavori comprensiva di tutti i dati relativi all’impresa esecutrice.</h5></div>
<p><span class="plominoHidewhenClass">end:hw_no_avviso</span></p>
<p><span class="plominoHidewhenClass">start:hw_no_lavori_in_economia</span></p>
<div class="alert alert-info"><h5>I lavori saranno eseguiti in economia ad opera diretta della sottoscritta committenza e, per quanto eccedesse i limiti delle sue capacità, avvalendosi di personale per il quale saranno attivate le forme assicurative temporanee previste dalle norme regolamentari vigenti. In ogni caso le prestazioni d’opera in argomento non potranno riguardare interventi sugli impianti, in quanto eseguibili solo da personale qualificato e a ciò abilitato. Considerato che nelle persone della sottoscritta committenza giungerà ad identificarsi anche quella di responsabile di cantiere, si dichiara che la gestione dei materiali di risulta avverrà nel rispetto delle disposizioni previste dal DLgs. n.152/06 e s. m. e i. con conseguente personale assunzione della relativa responsabilità. Nell’eventualità che per i lavori edilizi ci si avvalesse anche, o in via sostitutiva, di imprese e/o artigiani, si adempirà preventivamente a quanto previsto dall’art. 90 comma 9 del DLgs. 9 aprile 2008, n.81 e s.m. e i, visto anche l’art. 43 comma 1 del DPR n.445/2000 e s.m. e i. La relativa dichiarazione (art.90 comma 9 lett. c) sarà integrata da tutti elementi identificativi indispensabili per l’acquisizione d’Ufficio, da parte di Codesto Sportello Unico, del DURC (Art.43 comma 1 ultimo periodo del DPR 445/2000 e s.m. e i.).</h5></div>
<p><span class="plominoHidewhenClass">end:hw_no_lavori_in_economia</span></p>
<p><span class="plominoHidewhenClass">start:hw_lavori_in_economia</span></p>
<div class="alert alert-info"><h5>I lavori saranno eseguiti dalle imprese (art.21 bis comma 2 L.R. n.16/2008) e/o dai lavoratori autonomi (art.90 comma 9 D.Lgs. n.81/2008 e s.m. e i.) indicati in premessa. Con riferimento ai relativi nominativi si è provveduto altresì a precisare i rispettivi elementi identificativi, che qui si dichiara corrispondenti a quelli riportati sul DURC, in quanto indispensabili per l’acquisizione d’Ufficio, da parte di Codesto Sportello Unico, dei relativi DURC (art.43 comma 1 ultimo periodo del DPR 445/2000 e s.m. e i.). A tale riguardo, considerato il combinato disposto dell’art.90 comma 9 del DLgs. 9 aprile 2008, n.81 e s.m. e i. e dell’art.14 comma 6-bis della L. 4 aprile 2012, n.35,</h5></div>
<p><span class="plominoSubformClass">base_sub_esecutore</span></p>
<p><span class="plominoLabelClass">altri_esecutori_grid</span><span class="plominoFieldClass">altri_esecutori_grid</span></p>
<hr>
<p><span class="plominoHidewhenClass">end:hw_lavori_in_economia</span></p>
]]></FormLayout>
      <FormMethod type="Products.Archetypes.Field.TextField"><![CDATA[Auto]]></FormMethod>
      <DocumentTitle type="Products.Archetypes.Field.TextField"><![CDATA[]]></DocumentTitle>
      <DynamicDocumentTitle type="Products.Archetypes.Field.BooleanField">False</DynamicDocumentTitle>
      <StoreDynamicDocumentTitle type="Products.Archetypes.Field.BooleanField">False</StoreDynamicDocumentTitle>
      <DocumentId type="Products.Archetypes.Field.TextField"><![CDATA[]]></DocumentId>
      <ActionBarPosition type="Products.Archetypes.Field.StringField">TOP</ActionBarPosition>
      <HideDefaultActions type="Products.Archetypes.Field.BooleanField">True</HideDefaultActions>
      <HideInMenu type="Products.Archetypes.Field.BooleanField">True</HideInMenu>
      <isSearchForm type="Products.Archetypes.Field.BooleanField">False</isSearchForm>
      <isPage type="Products.Archetypes.Field.BooleanField">False</isPage>
      <SearchView type="Products.Archetypes.Field.StringField"/>
      <SearchFormula type="Products.Archetypes.Field.TextField"><![CDATA[]]></SearchFormula>
      <Position type="Products.Archetypes.Field.IntegerField"/>
      <ResourcesJS type="Products.Archetypes.Field.TextField"><![CDATA[]]></ResourcesJS>
      <ResourcesCSS type="Products.Archetypes.Field.TextField"><![CDATA[++resource++iol.document/css/bootstrap.min.css
++resource++iol.document/css/bootstrap-accessibile.min.css
++resource++iol.document/css/bootstrap-responsive.min.css
++resource++iol.document/css/iol.css
resources/iol-custom.css]]></ResourcesCSS>
      <excludeFromNav type="Products.Archetypes.Field.BooleanField">False</excludeFromNav>
      <elements>
        <element id="lavori_economia_opt" title="Scelta esecuzione delle opere" type="PlominoField">
          <id type="Products.Archetypes.Field.StringField">lavori_economia_opt</id>
          <FieldType type="Products.Archetypes.Field.StringField">SELECTION</FieldType>
          <FieldMode type="Products.Archetypes.Field.StringField">EDITABLE</FieldMode>
          <Formula type="Products.Archetypes.Field.TextField"><![CDATA[]]></Formula>
          <FieldReadTemplate type="Products.Archetypes.Field.StringField">SELECTIONFieldReadCheck</FieldReadTemplate>
          <FieldEditTemplate type="Products.Archetypes.Field.StringField"/>
          <Mandatory type="Products.Archetypes.Field.BooleanField">True</Mandatory>
          <ValidationFormula type="Products.Archetypes.Field.TextField"><![CDATA[]]></ValidationFormula>
          <ToBeIndexed type="Products.Archetypes.Field.BooleanField">False</ToBeIndexed>
          <IndexType type="Products.Archetypes.Field.StringField">DEFAULT</IndexType>
          <HTMLAttributesFormula type="Products.Archetypes.Field.TextField"><![CDATA['data-dhw=sub_esecutore']]></HTMLAttributesFormula>
          <params>
<param>
<value><array><data>
<value><struct>
<member>
<name>dynamictableparam</name>
<value><string>'bPaginate': true,
'bLengthChange': true,
'bFilter': true,
'bSort': true,
'bInfo': true,
'bAutoWidth': false</string></value>
</member>
</struct></value>
<value><struct>
<member>
<name>selectionlistformula</name>
<value><string>ll = ['''In quanto opere di modesta entità che non interessano le specifiche normative di settore, i lavori sono eseguiti / sono stati eseguiti in prima persona, senza alcun affidamento a ditte esterne;|1''','''I lavori saranno eseguiti da un impresa;|2''']

if context.getItem('iol_tipo_app','') in ['cil']:
    return ll

if context.getItem('iol_tipo_app','') in ['cila']:
    ll.append('''L'attività oggetto della presente comunicazione/istanza non richiede l'esecuzione di opere.|4''')
    return ll

if context.getItem('iol_tipo_app','') in ['dsi']:
    ll = ['''I lavori sono in economia diretta cioè, ai sensi dell’art. 67 DPR 380/01, non esiste il Committente ed il Costruttore esegue in proprio;|1''','''I lavori saranno eseguiti da un impresa;|2''','''l’impresa esecutrice/imprese esecutrici dei lavori sarà/saranno individuata/e prima dell’inizio dei lavori;|3''']
    return ll

ll.append('''l’impresa esecutrice/imprese esecutrici dei lavori sarà/saranno individuata/e prima dell’inizio dei lavori;|3''')
ll.append('''L'attività oggetto della presente comunicazione/istanza non richiede l'esecuzione di opere.|4''')

return ll
</string></value>
</member>
</struct></value>
<value><struct>
<member>
<name>widget</name>
<value><string>RADIO</string></value>
</member>
</struct></value>
</data></array></value>
</param>
</params>
        </element>
        <element id="hw_no_lavori_in_economia" title="hw_no_lavori_in_economia" type="PlominoHidewhen">
          <id type="Products.Archetypes.Field.StringField">hw_no_lavori_in_economia</id>
          <Formula type="Products.Archetypes.Field.TextField"><![CDATA[context.getItem('lavori_economia_opt','')!='1']]></Formula>
          <isDynamicHidewhen type="Products.Archetypes.Field.BooleanField">True</isDynamicHidewhen>
        </element>
        <element id="hw_lavori_in_economia" title="hw_lavori_in_economia" type="PlominoHidewhen">
          <id type="Products.Archetypes.Field.StringField">hw_lavori_in_economia</id>
          <Formula type="Products.Archetypes.Field.TextField"><![CDATA[return context.getItem('lavori_economia_opt','')!='2']]></Formula>
          <isDynamicHidewhen type="Products.Archetypes.Field.BooleanField">True</isDynamicHidewhen>
        </element>
        <element id="altri_esecutori_grid" title="Altre imprese esecutrici" type="PlominoField">
          <id type="Products.Archetypes.Field.StringField">altri_esecutori_grid</id>
          <FieldType type="Products.Archetypes.Field.StringField">DATAGRID</FieldType>
          <FieldMode type="Products.Archetypes.Field.StringField">EDITABLE</FieldMode>
          <Formula type="Products.Archetypes.Field.TextField"><![CDATA[]]></Formula>
          <FieldReadTemplate type="Products.Archetypes.Field.StringField"/>
          <FieldEditTemplate type="Products.Archetypes.Field.StringField"/>
          <Mandatory type="Products.Archetypes.Field.BooleanField">False</Mandatory>
          <ValidationFormula type="Products.Archetypes.Field.TextField"><![CDATA[]]></ValidationFormula>
          <ToBeIndexed type="Products.Archetypes.Field.BooleanField">False</ToBeIndexed>
          <IndexType type="Products.Archetypes.Field.StringField">DEFAULT</IndexType>
          <HTMLAttributesFormula type="Products.Archetypes.Field.TextField"><![CDATA[]]></HTMLAttributesFormula>
          <params>
<param>
<value><array><data>
<value><struct>
<member>
<name>associated_form</name>
<value><string>base_sub_esecutore</string></value>
</member>
</struct></value>
<value><struct>
<member>
<name>field_mapping</name>
<value><string>esecutore_denominazione,esecutore_cognome,esecutore_comune,esecutore_cf,esecutore_app,esecutore_cap,esecutore_cap_residenza,esecutore_cciaa,esecutore_cciaa_numero,esecutore_cellulare,esecutore_civico,esecutore_civico_residenza,esecutore_cod_cat_nato,esecutore_comune_nato,esecutore_comune_residenza,esecutore_data_nato,esecutore_edile_numero,esecutore_edile_prov,esecutore_email,esecutore_fax,esecutore_inail,esecutore_indirizzo,esecutore_indirizzo_residenza,esecutore_inps,esecutore_nome,esecutore_pec,esecutore_piva,esecutore_piva_comunitaria,esecutore_provincia,esecutore_provincia_nato,esecutore_provincia_residenza,esecutore_qualita,esecutore_qualita_altro,esecutore_ruolo,esecutore_search,esecutore_sesso,esecutore_telefono</string></value>
</member>
</struct></value>
<value><struct>
<member>
<name>jssettings</name>
<value><string>"aoColumns": [
    { "sTitle": "Denominazione"},
    { "sTitle": "Cognome" },
    { "sTitle": "Comune" },
    { "sTitle": "C.F."}     
],
"bPaginate": false,
"bLengthChange": false,
"bFilter": false,
"bSort": false,
"bInfo": false,
"bAutoWidth": false,
"plominoDialogOptions": {
        "width": 1000,
        "height": 800
    }
</string></value>
</member>
</struct></value>
<value><struct>
<member>
<name>widget</name>
<value><string>READ_STATIC</string></value>
</member>
</struct></value>
</data></array></value>
</param>
</params>
        </element>
        <element id="hw_no_avviso" title="hw_no_avviso" type="PlominoHidewhen">
          <id type="Products.Archetypes.Field.StringField">hw_no_avviso</id>
          <Formula type="Products.Archetypes.Field.TextField"><![CDATA[return context.getItem('lavori_economia_opt','')!='3']]></Formula>
          <isDynamicHidewhen type="Products.Archetypes.Field.BooleanField">True</isDynamicHidewhen>
        </element>
        <element id="btn_save" title="Salva e continua &gt;&gt;" type="PlominoAction">
          <id type="Products.Archetypes.Field.StringField">btn_save</id>
          <ActionType type="Products.Archetypes.Field.StringField">SAVE</ActionType>
          <ActionDisplay type="Products.Archetypes.Field.StringField">BUTTON</ActionDisplay>
          <Content type="Products.Archetypes.Field.TextField"><![CDATA[]]></Content>
          <Hidewhen type="Products.Archetypes.Field.TextField"><![CDATA[not context.isEditMode()]]></Hidewhen>
          <InActionBar type="Products.Archetypes.Field.BooleanField">True</InActionBar>
        </element>
        <element id="btn_cancel" title="Annulla" type="PlominoAction">
          <id type="Products.Archetypes.Field.StringField">btn_cancel</id>
          <ActionType type="Products.Archetypes.Field.StringField">REDIRECT</ActionType>
          <ActionDisplay type="Products.Archetypes.Field.StringField">BUTTON</ActionDisplay>
          <Content type="Products.Archetypes.Field.TextField"><![CDATA[context.absolute_url()]]></Content>
          <Hidewhen type="Products.Archetypes.Field.TextField"><![CDATA[not context.isEditMode()]]></Hidewhen>
          <InActionBar type="Products.Archetypes.Field.BooleanField">True</InActionBar>
        </element>
      </elements>
    </element>
  </design>
</plominodatabase>
